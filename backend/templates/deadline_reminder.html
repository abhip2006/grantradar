{% extends "base.html" %}

{% block title %}Deadline Reminder: {{ grant_title }} - {{ app_name }}{% endblock %}

{% block preview_text %}{{ grant_title }} deadline is {{ time_remaining }}. Don't miss this opportunity!{% endblock %}

{% block header_subtitle %}
<p style="margin: 10px 0 0 0; font-size: 14px; color: rgba(255, 255, 255, 0.9);">
    Deadline Reminder
</p>
{% endblock %}

{% block content %}
<!-- Urgency Banner -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-bottom: 25px;">
    <tr>
        <td>
            {% if days_remaining <= 1 %}
            <div style="background-color: #fee2e2; border-radius: 8px; padding: 16px 20px; text-align: center;">
                <span style="font-size: 24px; display: block; margin-bottom: 4px;">&#9888;</span>
                <p style="margin: 0; font-size: 18px; font-weight: 700; color: #991b1b;">
                    {% if days_remaining == 0 %}Due Today!{% else %}Due Tomorrow!{% endif %}
                </p>
            </div>
            {% elif days_remaining <= 3 %}
            <div style="background-color: #fef3c7; border-radius: 8px; padding: 16px 20px; text-align: center;">
                <span style="font-size: 24px; display: block; margin-bottom: 4px;">&#128337;</span>
                <p style="margin: 0; font-size: 18px; font-weight: 700; color: #92400e;">
                    Due in {{ time_remaining }}
                </p>
            </div>
            {% else %}
            <div style="background-color: #dbeafe; border-radius: 8px; padding: 16px 20px; text-align: center;">
                <span style="font-size: 24px; display: block; margin-bottom: 4px;">&#128197;</span>
                <p style="margin: 0; font-size: 18px; font-weight: 700; color: #1e40af;">
                    Due in {{ time_remaining }}
                </p>
            </div>
            {% endif %}
        </td>
    </tr>
</table>

<!-- Greeting -->
<h2 style="margin: 0 0 20px 0; font-size: 24px; font-weight: 600; color: #1a1a2e;">
    Deadline Reminder
</h2>

<p style="margin: 0 0 20px 0; font-size: 16px; color: #4b5563;">
    Hi {{ user_name }},
</p>

<p style="margin: 0 0 25px 0; font-size: 16px; color: #4b5563; line-height: 1.7;">
    This is a reminder that the deadline for the following {% if deadline_type == 'custom' %}task{% else %}grant{% endif %} is coming up:
</p>

<!-- Grant/Deadline Details Card -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #f9fafb; border: 1px solid #e5e7eb; border-radius: 8px; margin-bottom: 25px;">
    <tr>
        <td style="padding: 24px;">
            <h3 style="margin: 0 0 16px 0; font-size: 18px; font-weight: 600; color: #1a1a2e;">
                {{ grant_title }}
            </h3>

            <table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
                {% if funder %}
                <tr>
                    <td width="100" style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #6b7280; font-weight: 500;">Funder:</span>
                    </td>
                    <td style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #1a1a2e;">{{ funder }}</span>
                    </td>
                </tr>
                {% endif %}

                {% if mechanism %}
                <tr>
                    <td width="100" style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #6b7280; font-weight: 500;">Mechanism:</span>
                    </td>
                    <td style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #1a1a2e;">{{ mechanism }}</span>
                    </td>
                </tr>
                {% endif %}

                {% if amount_range %}
                <tr>
                    <td width="100" style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #6b7280; font-weight: 500;">Funding:</span>
                    </td>
                    <td style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #1a1a2e;">{{ amount_range }}</span>
                    </td>
                </tr>
                {% endif %}

                <tr>
                    <td width="100" style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #6b7280; font-weight: 500;">Deadline:</span>
                    </td>
                    <td style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #1a1a2e; font-weight: 600;">{{ deadline_date }}</span>
                    </td>
                </tr>

                {% if priority %}
                <tr>
                    <td width="100" style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #6b7280; font-weight: 500;">Priority:</span>
                    </td>
                    <td style="padding: 6px 0; vertical-align: top;">
                        {% if priority == 'high' %}
                        <span style="display: inline-block; background-color: #fee2e2; color: #991b1b; padding: 2px 10px; border-radius: 9999px; font-size: 12px; font-weight: 600; text-transform: uppercase;">
                            High
                        </span>
                        {% elif priority == 'medium' %}
                        <span style="display: inline-block; background-color: #fef3c7; color: #92400e; padding: 2px 10px; border-radius: 9999px; font-size: 12px; font-weight: 600; text-transform: uppercase;">
                            Medium
                        </span>
                        {% else %}
                        <span style="display: inline-block; background-color: #d1fae5; color: #065f46; padding: 2px 10px; border-radius: 9999px; font-size: 12px; font-weight: 600; text-transform: uppercase;">
                            Low
                        </span>
                        {% endif %}
                    </td>
                </tr>
                {% endif %}

                {% if status %}
                <tr>
                    <td width="100" style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #6b7280; font-weight: 500;">Status:</span>
                    </td>
                    <td style="padding: 6px 0; vertical-align: top;">
                        <span style="font-size: 14px; color: #1a1a2e;">{{ status }}</span>
                    </td>
                </tr>
                {% endif %}
            </table>
        </td>
    </tr>
</table>

<!-- Notes (optional) -->
{% if notes %}
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="margin-bottom: 25px;">
    <tr>
        <td style="border-left: 3px solid #667eea; padding-left: 16px;">
            <p style="margin: 0 0 4px 0; font-size: 12px; font-weight: 600; color: #6b7280; text-transform: uppercase; letter-spacing: 0.5px;">
                Notes
            </p>
            <p style="margin: 0; font-size: 14px; color: #4b5563; line-height: 1.6;">
                {{ notes }}
            </p>
        </td>
    </tr>
</table>
{% endif %}

<!-- CTA Buttons -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
    <tr>
        <td align="center" style="padding: 10px 0;">
            <a href="{{ view_url }}" class="button" style="display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: #ffffff; padding: 16px 40px; font-size: 16px; font-weight: 600; text-decoration: none; border-radius: 8px; box-shadow: 0 4px 6px rgba(102, 126, 234, 0.25);">
                {% if deadline_type == 'custom' %}View Deadline{% else %}View Grant{% endif %}
            </a>
        </td>
    </tr>
</table>

{% if grant_url %}
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%">
    <tr>
        <td align="center" style="padding: 10px 0 25px 0;">
            <a href="{{ grant_url }}" style="color: #667eea; font-size: 14px; text-decoration: none; font-weight: 500;">
                Visit Funder's Website &#8594;
            </a>
        </td>
    </tr>
</table>
{% endif %}

<!-- Helpful Tips -->
<table role="presentation" cellspacing="0" cellpadding="0" border="0" width="100%" style="background-color: #f3f4f6; border-radius: 8px;">
    <tr>
        <td style="padding: 20px;">
            <h4 style="margin: 0 0 12px 0; font-size: 14px; font-weight: 600; color: #1a1a2e;">
                Quick Tips:
            </h4>
            <ul style="margin: 0; padding-left: 20px; color: #4b5563; font-size: 14px; line-height: 1.8;">
                <li>Submit early to avoid last-minute technical issues</li>
                <li>Double-check all required documents and attachments</li>
                <li>Review eligibility requirements one final time</li>
            </ul>
        </td>
    </tr>
</table>

<p style="margin: 25px 0 0 0; font-size: 14px; color: #6b7280; line-height: 1.7;">
    Don't miss this opportunity! Make sure to submit your application before the deadline.
</p>
{% endblock %}

{% block footer_content %}
<tr>
    <td align="center" style="padding-bottom: 15px;">
        <a href="{{ frontend_url }}/settings/notifications" style="color: #667eea; font-size: 13px; text-decoration: none;">
            Manage reminder preferences
        </a>
    </td>
</tr>
{% endblock %}
