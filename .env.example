# ===== Database =====
# Local development
DATABASE_URL=postgresql://grantradar:grantradar_dev_password@localhost:5432/grantradar
ASYNC_DATABASE_URL=postgresql+asyncpg://grantradar:grantradar_dev_password@localhost:5432/grantradar
# Railway: Use ${{Postgres.DATABASE_URL}} reference variable

# ===== Redis =====
# Local development
REDIS_URL=redis://localhost:6379/0
CELERY_BROKER_URL=redis://localhost:6379/1
CELERY_RESULT_BACKEND=redis://localhost:6379/2
# Railway: Use ${{Redis.REDIS_URL}} reference variable

# ===== AI API Keys =====
ANTHROPIC_API_KEY=your_anthropic_api_key_here
OPENAI_API_KEY=your_openai_api_key_here

# ===== Notification Services =====
SENDGRID_API_KEY=your_sendgrid_api_key_here
TWILIO_ACCOUNT_SID=your_twilio_account_sid_here
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here
TWILIO_PHONE_NUMBER=+1234567890

# ===== Stripe (Add Later) =====
STRIPE_SECRET_KEY=your_stripe_secret_key_here
STRIPE_PUBLISHABLE_KEY=your_stripe_publishable_key_here
STRIPE_WEBHOOK_SECRET=your_stripe_webhook_secret_here

# ===== Application =====
# SECURITY: Generate a strong secret key with: openssl rand -hex 32
# Must be at least 32 characters. The application will REFUSE to start in
# production if this is not set properly.
SECRET_KEY=your_jwt_secret_key_here_generate_with_openssl_rand_hex_32
JWT_SECRET_KEY=your_jwt_secret_key_here_generate_with_openssl_rand_hex_32
ENVIRONMENT=development
# SECURITY: Set to false in production - exposes debug info and API docs
DEBUG=true
BACKEND_URL=http://localhost:8000
FRONTEND_URL=http://localhost:5173

# ===== Development Auth Bypass =====
# SECURITY: ONLY enable in local development. NEVER in production.
# This bypasses all authentication - set to false in production!
DEV_BYPASS_AUTH=false
# Frontend development bypass (only works if VITE_DEV_BYPASS_AUTH=true)
VITE_DEV_BYPASS_AUTH=false

# ===== Email Settings =====
FROM_EMAIL=alerts@grantradar.com
FROM_NAME=GrantRadar

# ===== Grant Source APIs (Free, no auth needed) =====
# NIH_REPORTER_API_URL=https://api.reporter.nih.gov/v2/projects/search
# NSF_API_URL=https://www.research.gov/awardapi-service/v1/awards.json
# GRANTS_GOV_API_URL=https://api.grants.gov/v1/api/search2
# GRANTS_GOV_RSS_URL=https://www.grants.gov/rss/GG_NewOps.xml

# ===== Railway Deployment =====
# Railway automatically provides these variables:
# PORT - The port your app should listen on
# RAILWAY_ENVIRONMENT - The environment name
# RAILWAY_SERVICE_NAME - The service name

# Railway PostgreSQL (auto-provisioned):
# PGHOST, PGPORT, PGUSER, PGPASSWORD, PGDATABASE
# DATABASE_URL - Full connection string

# Railway Redis (auto-provisioned):
# REDIS_URL - Full connection string

# ===== Rate Limiting =====
# Enable/disable rate limiting (disable in development if needed)
RATE_LIMIT_ENABLED=true

# Auth endpoints (login, register, forgot-password) - requests per minute
RATE_LIMIT_AUTH_REQUESTS=5
RATE_LIMIT_AUTH_WINDOW=60

# AI endpoints (chat, writing, insights) - requests per minute
RATE_LIMIT_AI_REQUESTS=30
RATE_LIMIT_AI_WINDOW=60

# Search endpoints - requests per minute
RATE_LIMIT_SEARCH_REQUESTS=60
RATE_LIMIT_SEARCH_WINDOW=60

# Standard API endpoints - requests per minute
RATE_LIMIT_STANDARD_REQUESTS=120
RATE_LIMIT_STANDARD_WINDOW=60

# ===== Sentry Error Tracking =====
# Backend Sentry configuration
SENTRY_DSN=your_sentry_dsn_here
SENTRY_ENVIRONMENT=development
SENTRY_TRACES_SAMPLE_RATE=0.1
SENTRY_PROFILES_SAMPLE_RATE=0.1

# Frontend Sentry configuration (VITE_ prefix for client-side)
VITE_SENTRY_DSN=your_frontend_sentry_dsn_here
VITE_SENTRY_ENVIRONMENT=development
VITE_APP_VERSION=1.0.0

# Sentry Vite plugin (for source map uploads during build)
# Generate auth token at: https://sentry.io/settings/auth-tokens/
SENTRY_AUTH_TOKEN=your_sentry_auth_token_here
SENTRY_ORG=grantradar
SENTRY_PROJECT=grantradar-frontend

# ===== SSL/HTTPS Configuration =====
# Enable SSL mode when running behind HTTPS reverse proxy
SSL_ENABLED=false
# Trust X-Forwarded-* headers from reverse proxy (nginx)
TRUST_PROXY_HEADERS=true
# Secure cookie settings (set to true in production with HTTPS)
COOKIE_SECURE=false
# SameSite cookie policy: "lax", "strict", or "none"
COOKIE_SAMESITE=lax

# ===== CORS Configuration =====
# Allowed origins for CORS (comma-separated list)
# Development: http://localhost:3000,http://localhost:5173,http://localhost:80
# Production: https://your-domain.com,https://www.your-domain.com
CORS_ORIGINS=http://localhost:3000,http://localhost:5173,http://localhost:80
# Allow credentials in CORS requests
CORS_ALLOW_CREDENTIALS=true

# ===== Docker SSL Configuration =====
# Port mappings for docker-compose.prod.yml
FRONTEND_HTTP_PORT=80
FRONTEND_HTTPS_PORT=443
# Domain name for Let's Encrypt certificates
DOMAIN=your-domain.com

# ===== Production Settings =====
# IMPORTANT: Set these in production:
# ENVIRONMENT=production
# DEBUG=false
# DEV_BYPASS_AUTH=false (or don't set at all - defaults to false)
# VITE_DEV_BYPASS_AUTH=false (or don't set at all)
# SSL_ENABLED=true
# COOKIE_SECURE=true
# BACKEND_URL=https://your-domain.com
# FRONTEND_URL=https://your-domain.com
# CORS_ORIGINS=https://your-domain.com,https://www.your-domain.com
#
# SECURITY CHECKLIST:
# [ ] SECRET_KEY is unique and at least 32 characters (use: openssl rand -hex 32)
# [ ] DEBUG=false
# [ ] DEV_BYPASS_AUTH is NOT set or is false
# [ ] VITE_DEV_BYPASS_AUTH is NOT set or is false
# [ ] SSL_ENABLED=true (if terminating TLS at app level)
# [ ] COOKIE_SECURE=true
# [ ] API keys are production keys, not test keys
# [ ] Sentry DSN is configured for error tracking

# ===== Database Backup =====
# Local backup settings
BACKUP_DIR=./backups
BACKUP_RETENTION_DAYS=30
BACKUP_SCHEDULE=0 2 * * *

# Encryption (optional - generate with: openssl rand -base64 32)
BACKUP_ENCRYPTION_KEY=

# S3 backup storage (optional)
S3_BACKUP_BUCKET=
S3_BACKUP_PREFIX=grantradar/backups
S3_STORAGE_CLASS=STANDARD_IA
S3_LIFECYCLE_DAYS=90
S3_GLACIER_DAYS=365

# AWS credentials for S3 (if not using instance profile)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=us-east-1
# AWS_PROFILE=default

# Backup notifications (optional)
SLACK_WEBHOOK_URL=
NOTIFICATION_EMAIL=
HEALTHCHECK_URL=

# Logging
LOG_DIR=./logs
